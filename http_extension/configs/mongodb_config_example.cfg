/**
 * MongoDB HTTP Extension - Configuration File
 * 
 * This file contains all configuration options for the MongoDB HTTP Extension.
 * Copy this file to your SourceMod configs directory and customize as needed.
 * 
 * File: addons/sourcemod/configs/mongodb_config.cfg
 */

"MongoDB"
{
    // ============================================
    // API Service Configuration
    // ============================================
    
    "api"
    {
        // MongoDB API service URL (required)
        "url"               "http://127.0.0.1:3300/api/v1"
        
        // API authentication key (required for security)
        "api_key"           "sourcemod-mongodb-extension-2024"
        
        // Request timeout in seconds (default: 30)
        "timeout"           "30"
        
        // Maximum retries for failed requests (default: 3)
        "max_retries"       "3"
        
        // Retry delay in milliseconds (default: 1000)
        "retry_delay"       "1000"
        
        // Enable request compression (default: true)
        "compression"       "true"
        
        // User agent for requests (default: auto-generated)
        "user_agent"        "SourceMod-MongoDB-Extension/1.0"
    }
    
    // ============================================
    // Security Configuration
    // ============================================
    
    "security"
    {
        // Enable SSL/TLS verification (default: true in production)
        "verify_ssl"        "false"
        
        // SSL certificate path (optional)
        "ssl_cert_path"     ""
        
        // Enable request signing (default: false)
        "sign_requests"     "false"
        
        // Request signing secret (required if sign_requests is true)
        "signing_secret"    ""
        
        // IP whitelist for API access (comma-separated, optional)
        "allowed_ips"       "127.0.0.1,192.168.1.0/24"
        
        // Enable rate limiting protection (default: true)
        "rate_limiting"     "true"
    }
    
    // ============================================
    // Connection Management
    // ============================================
    
    "connections"
    {
        // Default MongoDB connection string
        "default_uri"       "mongodb://admin:password@127.0.0.1:27017/?authSource=admin"
        
        // Connection pool size (default: 5)
        "pool_size"         "5"
        
        // Connection timeout in seconds (default: 30)
        "connect_timeout"   "30"
        
        // Socket timeout in seconds (default: 30)
        "socket_timeout"    "30"
        
        // Enable connection pooling (default: true)
        "pooling"           "true"
        
        // Connection keep-alive in seconds (default: 300)
        "keep_alive"        "300"
        
        // Auto-reconnect on connection loss (default: true)
        "auto_reconnect"    "true"
        
        // Maximum reconnection attempts (default: 5)
        "max_reconnects"    "5"
    }
    
    // ============================================
    // Database Configuration
    // ============================================
    
    "database"
    {
        // Default database name
        "default_db"        "sourcemod"
        
        // Default collection for player data
        "players_collection" "players"
        
        // Default collection for server data
        "servers_collection" "servers"
        
        // Default collection for logs
        "logs_collection"   "logs"
        
        // Enable automatic database creation (default: true)
        "auto_create_db"    "true"
        
        // Enable automatic collection creation (default: true)
        "auto_create_collections" "true"
        
        // Default write concern (default: "majority")
        "write_concern"     "majority"
        
        // Default read preference (default: "primary")
        "read_preference"   "primary"
    }
    
    // ============================================
    // Performance Configuration
    // ============================================
    
    "performance"
    {
        // Enable query caching (default: true)
        "query_cache"       "true"
        
        // Cache TTL in seconds (default: 300)
        "cache_ttl"         "300"
        
        // Maximum cache size in MB (default: 50)
        "max_cache_size"    "50"
        
        // Enable batch operations (default: true)
        "batch_operations"  "true"
        
        // Maximum batch size (default: 100)
        "max_batch_size"    "100"
        
        // Enable compression for large documents (default: true)
        "document_compression" "true"
        
        // Compression threshold in bytes (default: 1024)
        "compression_threshold" "1024"
        
        // Enable connection multiplexing (default: true)
        "multiplexing"      "true"
    }
    
    // ============================================
    // Logging Configuration
    // ============================================
    
    "logging"
    {
        // Enable MongoDB operation logging (default: true)
        "enabled"           "true"
        
        // Log level: debug, info, warn, error (default: info)
        "level"             "info"
        
        // Log file path (relative to sourcemod/logs)
        "file"              "mongodb_extension.log"
        
        // Maximum log file size in MB (default: 10)
        "max_file_size"     "10"
        
        // Number of log files to keep (default: 5)
        "max_files"         "5"
        
        // Log query execution times (default: true)
        "log_query_times"   "true"
        
        // Log slow queries (queries taking longer than threshold)
        "log_slow_queries"  "true"
        
        // Slow query threshold in milliseconds (default: 1000)
        "slow_query_threshold" "1000"
        
        // Log failed operations (default: true)
        "log_errors"        "true"
        
        // Include stack traces in error logs (default: false)
        "include_stack_traces" "false"
    }
    
    // ============================================
    // Error Handling Configuration
    // ============================================
    
    "error_handling"
    {
        // Enable automatic error recovery (default: true)
        "auto_recovery"     "true"
        
        // Maximum recovery attempts (default: 3)
        "max_recovery_attempts" "3"
        
        // Recovery delay in milliseconds (default: 5000)
        "recovery_delay"    "5000"
        
        // Enable error notifications to admins (default: false)
        "notify_admins"     "false"
        
        // Admin notification method: chat, console, both (default: console)
        "notification_method" "console"
        
        // Enable error metrics collection (default: true)
        "collect_metrics"   "true"
        
        // Error threshold for alerts (errors per minute, default: 10)
        "error_threshold"   "10"
    }
    
    // ============================================
    // Feature Flags
    // ============================================
    
    "features"
    {
        // Enable advanced aggregation operations (default: true)
        "aggregation"       "true"
        
        // Enable index management (default: true)
        "index_management"  "true"
        
        // Enable bulk operations (default: true)
        "bulk_operations"   "true"
        
        // Enable transaction support (default: false, requires MongoDB 4.0+)
        "transactions"      "false"
        
        // Enable change streams (default: false, requires MongoDB 3.6+)
        "change_streams"    "false"
        
        // Enable GridFS support (default: false)
        "gridfs"            "false"
        
        // Enable text search (default: true)
        "text_search"       "true"
        
        // Enable geospatial queries (default: false)
        "geospatial"        "false"
    }
    
    // ============================================
    // Development & Debug Configuration
    // ============================================
    
    "development"
    {
        // Enable debug mode (default: false)
        "debug_mode"        "false"
        
        // Enable query profiling (default: false)
        "query_profiling"   "false"
        
        // Enable performance monitoring (default: false)
        "performance_monitoring" "false"
        
        // Enable request/response logging (default: false)
        "log_requests"      "false"
        
        // Enable mock mode for testing (default: false)
        "mock_mode"         "false"
        
        // Mock response delay in milliseconds (default: 100)
        "mock_delay"        "100"
    }
}
